<!DOCTYPE html>
<html>
<head>
    <title>Dungeon Generator</title>
    <style>
        .legend {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 20px;
            max-width: 800px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .legend-icon {
            width: 30px;
            height: 30px;
        }
    </style>
</head>
<body>
    <h1>Random Dungeon - Seed: {{ seed }}</h1>
    <img src="data:image/png;base64,{{ dungeon_img }}" alt="Generated Dungeon">
    
    <h2>Legend</h2>
    <div class="legend">
        <div class="legend-item">
            <img class="legend-icon" src="data:image/png;base64,{{ icons.room }}" alt="Room">
            <span>Room</span>
        </div>
        <div class="legend-item">
            <img class="legend-icon" src="data:image/png;base64,{{ icons.corridor }}" alt="Corridor">
            <span>Corridor</span>
        </div>
        <div class="legend-item">
            <img class="legend-icon" src="data:image/png;base64,{{ icons.arch }}" alt="Archway">
            <span>Archway</span>
        </div>
        <div class="legend-item">
            <img class="legend-icon" src="data:image/png;base64,{{ icons.open_door }}" alt="Open Door">
            <span>Open Door</span>
        </div>
        <div class="legend-item">
            <img class="legend-icon" src="data:image/png;base64,{{ icons.locked_door }}" alt="Locked Door">
            <span>Locked Door</span>
        </div>
        <div class="legend-item">
            <img class="legend-icon" src="data:image/png;base64,{{ icons.trapped_door }}" alt="Trapped Door">
            <span>Trapped Door</span>
        </div>
        <div class="legend-item">
            <img class="legend-icon" src="data:image/png;base64,{{ icons.secret_door }}" alt="Secret Door">
            <span>Secret Door</span>
        </div>
        <div class="legend-item">
            <img class="legend-icon" src="data:image/png;base64,{{ icons.portcullis }}" alt="Portcullis">
            <span>Portcullis</span>
        </div>
        <div class="legend-item">
            <img class="legend-icon" src="data:image/png;base64,{{ icons.stairs_up }}" alt="Stairs Up">
            <span>Stairs Up</span>
        </div>
        <div class="legend-item">
            <img class="legend-icon" src="data:image/png;base64,{{ icons.stairs_down }}" alt="Stairs Down">
            <span>Stairs Down</span>
        </div>
    </div>
    
    <p>
        <a href="/?seed={{ seed }}">Regenerate same seed</a> | 
        <a href="/">New random dungeon</a>
    </p>
</body>
</html>